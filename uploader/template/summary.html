{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <title>Summary Report</title>
 
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> 
    <style>
        table{
            width:1350px;
            cell-spacing:4px;
            border:1px solid black;
            margin-left:50px;
            color:white;
        }
        .r{
            color:yellow;
            font-weight:normal;

        }
        body{
            background-color:#87CEFA;
        }
        h1{color:white;}
        .glass3{
            background-color:#FFFDD0;
        }
    </style>

</head>
<body>
  <center><h1>Summary</h1></center>
  <h4> Total Number of Records: {{total}}</h4>
  <table>
    <tr>
      
      <th>ACCOUNT Number</th>
      <th>Customer State</th>
      <th>Customer Pin</th>
      <th>DPD</th>
      <TH>Count</TH>
    </tr>
    {% for i in  data %}
    <tr>
      
      <th class="r">{{i.ACCNO}}</th>
      <th class="r">{{i.CustState}}</th>
      <th class="r">{{i.CustPin}}</th>
      <th class="r">{{i.DPD}}</th>
      <th class="r">{{i.count}}</th>
    </tr>
    {% endfor %}
  </table><br>
  <div class="glass3">
    <canvas id="myChart1"></canvas>  
  </div>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.2.1/dist/chart.umd.min.js"></script> 
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
<script>
    const ctx = document.getElementById('myChart1');
  
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: [{% for k in states %} '{{ k }}', {% endfor %}],
        datasets: [{
          label: 'States and total persons',
          data: [{% for j in numbers %} '{{ j }}', {% endfor %}],
          borderWidth: 1,
          
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
  </script>
 
</html>